# HTTP Server with Resume Generator 

## Описание
Данное руководство было составлено с помощью нейросетей с корректировкой автора. 

Эта программа содержит реализацию HTTP-сервера на основе Flask, который предоставляет веб-интерфейс для генерации резюме. Сервер собирает данные пользователя из API Google, Microsoft Graph и GitHub, а затем генерирует HTML-страницу с резюме на основе шаблона с использованием Jinja2. Основная цель данного задания — изучение работы с HTTP-сервером и шаблонизаторами.

### Основные функции:
- Генерация резюме на основе данных из API:
  - Google People API (имя пользователя).
  - Microsoft Graph API (email, должность, ID пользователя).
  - GitHub API (список репозиториев пользователя).
  - Веб-интерфейс на Flask с кнопкой для генерации и обновления резюме.
- Сохранение сгенерированного резюме в файл `index.html`.
- Поддержка GET и POST запросов для генерации резюме.

## Требования

Для запуска проекта необходимо установить следующие зависимости:
- Python 3.8+
- Библиотеки:
  - `flask` (для веб-сервера).
  - `jinja2` (для шаблонов, обычно поставляется вместе с Flask).
  - `requests` (для работы с API).
  - `python-dotenv` (для загрузки переменных окружения из `.env`).

Установить зависимости можно с помощью команды:
```bash
pip install -r requirements.txt
```

## Структура проекта

```
http-server_task7/
│
├── server.py                # Основной файл сервера на Flask
├── resume_manipulator.py    # Модуль для генерации резюме из API
├── public/                  # Директория для статических файлов
│   └── index.html           # Сгенерированный файл резюме
├── template/                # Директория для шаблонов
│   └── index.html           # Шаблон резюме (Jinja2)
├── .env                     # Файл с токенами API (не включен в репозиторий)
├── requirements.txt         # Список зависимостей
└── README.md                # Документация (этот файл)
```

## Настройка токенов API

Для работы проекта необходимо получить токены доступа для API Google, Microsoft Graph и GitHub. Эти токены должны быть сохранены в файле `.env` в корневой директории проекта.

#### 1. Google People API Token

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/).
2. Создайте новый проект или выберите существующий.
3. Включите API:
   - Перейдите в раздел **"APIs & Services" > "API Library" > "Google Workspace"**.
   - Найдите **Google People API** и включите его.
4. Настройте OAuth 2.0:
   - Перейдите в **"APIs & Services" > "Credentials"**.
   - Нажмите **"Create Credentials" > "OAuth 2.0 Client IDs"**.
   - Выберите тип приложения (например, "Desktop app").
   - Скачайте JSON-файл с учетными данными.
5. Получите токен:
   - Используйте [OAuth 2.0 Playground](https://developers.google.com/oauthplayground) или библиотеку `google-auth` для получения токена.
   - Убедитесь, что токен включает следующий scopes:
     - `https://www.googleapis.com/auth/userinfo.profile`
   - Скопируйте полученный access token и вставьте его в `.env` в значение `GOOGLE_TOKEN`.

#### 2. Microsoft Graph API Token

1. Перейдите на сайт [Microsoft Graph](https://developer.microsoft.com/en-us/graph/graph-explorer?request=me).
2. Нажмите на иконку пользователя в правом верхнем углу и авторизуйтесь. 
3. По центру страницы откройте одну из четырех вкладок: **"Access token"**
4. Скопируйте полученный access token и вставьте его в `.env` как `MICROSOFT_TOKEN`.

#### 3. GitHub API Token

1. Перейдите в настройки вашего аккаунта GitHub:
   - Нажмите на аватар в правом верхнем углу > **"Settings" > "Developer settings" > "Personal access tokens" > "Tokens (classic)"**.
2. Создайте новый токен:
   - Нажмите **"Generate new token"**.
   - Укажите название токена и выберите необходимые scopes (например, `repo` для доступа к репозиториям).
3. Скопируйте сгенерированный токен и вставьте его в `.env` как `GITHUB_TOKEN`.

> **Важно:** Токены являются конфиденциальной информацией. Не публикуйте их в репозиториях или других публичных местах. Убедитесь, что файл `.env` добавлен в `.gitignore`.

### Пример файла `.env`:
```
GOOGLE_TOKEN=ya29.a0AfH6SMD...
MICROSOFT_TOKEN=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2...
GITHUB_TOKEN=ghp_abc123xyz...
```

**Важно**: Не добавляйте файл `.env` в репозиторий, так как он содержит конфиденциальные данные. Убедитесь, что он включен в `.gitignore`.

## Запуск проекта

1. Клонируйте репозиторий и перейдите в ветку `http-server_task7`:
   ```bash
   git clone https://git.miem.hse.ru/ps-biv24x/aamizgailo.git
   git checkout http-server_task7
   ```

2. Убедитесь, что все зависимости установлены:
   ```bash
   pip install -r requirements.txt
   ```

3. Создайте файл `.env` и добавьте токены API, как описано выше.

4. Запустите сервер:
   ```bash
   python main.py
   ```

5. Откройте браузер и перейдите по адресу:
   ```
   http://localhost:1301
   ```
   - На главной странице вы увидите сгенерированное резюме с данными из API и кнопку "Обновить резюме".
   - Нажмите на кнопку, чтобы обновить резюме на основе актуальных данных из API.

## Примеры запросов

### Главная страница (GET)
- Запрос: `GET /` или `POST /`
- Ответ: HTML-страница с кнопкой для его обновления.

### Обновление резюме (GET/POST)
- Запрос: `GET /resume/regenerate` или `POST /resume/regenerate`
- Ответ: Обновленный HTML-файл резюме, который также сохраняется в `public/index.html`.

## Возможные ошибки

- **Ошибка 401 (Unauthorized)**: Неверный или истекший токен API. Проверьте токены в `.env` и обновите их.
- **Ошибка 403 (Forbidden)**: Недостаточно прав для доступа к API. Убедитесь, что токены имеют необходимые разрешения.
- **Ошибка 404 (Not Found)**: Запрашиваемый ресурс не найден. Проверьте пути к файлам шаблонов и статических файлов.
- Если сервер не запускается, убедитесь, что порт `1301` не занят другим процессом.

## Дополнительная информация

- Проект использует Flask для веб-интерфейса и Jinja2 для шаблонов.
- Для тестирования API можно использовать инструменты, такие как Postman или curl.
- Токены Google и Microsoft обычно имеют ограниченный срок действия (например, 1 час). Для долгосрочного использования настройте обновление токенов с помощью refresh token.
- GitHub токены по умолчанию имеют срок 30 дней.

## References

Данный проект разработан Мизгайло Анной Александровной, студенткой группы БИВ242 образовательной программы ИВТ МИЭМ НИУ ВШЭ.
